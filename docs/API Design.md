## 按页面分类的接口设计（请求URL、输入、输出）

### 登录页面

接口URL：/account/login

请求方法：POST

请求参数：

|  字段名  |         说明         |  类型  | 是否必填 |   备注    |
| :------: | :------------------: | :----: | :------: | :-------: |
|   u_id   | 学号/工号/管理员编号 | String |    是    |     -     |
| password |         密码         | String |    是    | md5码加密 |

返回参数：

| 字段名  | 说明                                                       |  类型  |                             备注                             |
| :-----: | :--------------------------------------------------------- | :----: | :----------------------------------------------------------: |
|  code   | 200：登录成功<br>208：用户id不存在<br>209：密码错误        |  int   |                              -                               |
| message | 200时：携带token<br>208时：用户id不存在<br>209时：密码错误 | String | 在请求/api/login，/api/register和/api/searchId以外的api时需要以pbl_token的名字携带于header中以做身份校验，用户登录超过2个小时则状态失效<br>token设计：u_id+毫秒数+密码md5码后5位<br>例子：12345_5000_AB2DC |
|  user   | json序列化的User对象                                       | String |    User对象的属性有u_id,type, u_name, gender,description     |
|  image  | 200时：携带图像url<br>其它时：null                         | String |                              -                               |



### 注册页面

接口URL：/account/searchId

请求方法：GET

请求参数：

| 字段名 | 说明 | 类型 | 是否必填 | 备注 |
| :----: | :--: | :--: | :------: | :--: |
|  u_id  | 学号 | int  |    是    |  -   |

返回参数：

| 字段名 | 说明                             | 类型 | 备注 |
| :----: | :------------------------------- | :--: | :--: |
|  code  | 200：学号可用<br>208：学号已存在 | int  |  -   |



接口URL：/account/register

请求方法：POST

请求参数：

|   字段名    | 说明 |     类型      | 是否必填 |        备注        |
| :---------: | :--: | :-----------: | :------: | :----------------: |
|    u_id     | 学号 |    String     |    是    |   类似S001、S002   |
|   u_name    | 姓名 |    String     |    是    |         -          |
|   gender    | 性别 |    String     |    是    |      男/女/无      |
|  password   | 密码 |    String     |    是    |     md5码加密      |
|    image    | 头像 | MultipartFile |    否    | 没有则生成默认头像 |
| description | 描述 |    String     |    否    |         -          |

返回参数：

| 字段名  | 说明                                     |  类型  |                             备注                             |
| :-----: | :--------------------------------------- | :----: | :----------------------------------------------------------: |
|  code   | 200：注册成功<br>其它：用户名已存在      |  int   |                              -                               |
| message | 200时：携带token<br>其它时：返回错误信息 | String | 在请求/api/login，/api/register和/api/searchId以外的api时需要以pbl_token的名字携带于header中以做身份校验 |
|  user   | json序列化的User对象                     | String |     User对象属性有u_id,type, u_name, gender,description      |
|  image  | 0时：携带图像url<br>其它时：null         | String |                              -                               |

### 个人信息管理、展示页面

接口URL：/api/searchMyCourses

请求方法：GET

请求参数：

|  字段名   |     说明     |  类型  | 是否必填 |         备注         |
| :-------: | :----------: | :----: | :------: | :------------------: |
| pbl_token |      -       | String |    是    |     用于验证身份     |
| pageIndex | 当前请求页码 | String |    是    |          -           |
| pageSize  | 一页元素数量 | String |    是    | 用于计算返回哪些元素 |

返回参数：

|  字段名  | 说明                                 |  类型  |                             备注                             |
| :------: | :----------------------------------- | :----: | :----------------------------------------------------------: |
|   code   | 200：查询成功<br>208：登录超时       |  int   |                              -                               |
| message  | 200：无<br>208：登录超时，请重新登录 | String |                              -                               |
| courses  | json序列化course数组                 | String | course对象包含属性c_id,t_id,c_name,point, description, status,image_URL<br>这里包含了老师教的课程/学生选的课程 |
| teachers | json序列化user数组                   | String |          至少包含u_id, image, 再加其它字段也可以的           |
|  total   | 课程对象总数量                       |  int   |                        用于计算总页码                        |



接口URL：/api/searchMyInformation

请求方法：GET

请求参数：

|  字段名   | 说明 |  类型  | 是否必填 |        备注        |
| :-------: | :--: | :----: | :------: | :----------------: |
| pbl_token |  -   | String |    是    |    用于验证身份    |
|   u_id    |  -   | String |    是    | 用于确认是谁的信息 |

返回参数：

| 字段名  | 说明                                  |  类型  |                    备注                     |
| :-----: | :------------------------------------ | :----: | :-----------------------------------------: |
|  code   | 200：查询成功<br>208：登录超时        |  int   |                      -                      |
| message | 200：无<br>208：登录超时，请重新登录  | String |                      -                      |
| content | json序列化的User信息                  | String | 属性有u_id,type, u_name, gender,description |
|  image  | 200：携带图像url<br>208/209：空字符串 | String |                      -                      |



接口URL：/api/changeMyImage

请求方法：PUT

请求参数：

|  字段名   | 说明 |     类型      | 是否必填 |          备注          |
| :-------: | :--: | :-----------: | :------: | :--------------------: |
| pbl_token |  -   |    String     |    是    |      用于验证身份      |
|   u_id    |  -   |    String     |    是    | 用于指定修改头像的对象 |
|   image   | 头像 | MultipartFile |    否    |   无则修改为默认头像   |

返回参数：

| 字段名  | 说明                                 |  类型  | 备注 |
| :-----: | :----------------------------------- | :----: | :--: |
|  code   | 200：修改成功<br>208：登录超时       |  int   |  -   |
| message | 200：无<br>208：登录超时，请重新登录 | String |  -   |
|  image  | 200：image_URL<br>208：无            | String |  -   |



接口URL：/api/changeMyInformation

请求方法：PUT

请求参数：

|  字段名   |         说明         |  类型  | 是否必填 |                    备注                     |
| :-------: | :------------------: | :----: | :------: | :-----------------------------------------: |
| pbl_token |          -           | String |    是    |                用于验证身份                 |
|  content  | json序列化的User对象 | String |    是    | 属性有u_id,type, u_name, gender,description |

返回参数：

| 字段名  | 说明                                 |  类型  | 备注 |
| :-----: | :----------------------------------- | :----: | :--: |
|  code   | 200：修改成功<br>208：登录超时       |  int   |  -   |
| message | 200：无<br>208：登录超时，请重新登录 | String |  -   |
|  token  | 200：新的token                       | String |  -   |



接口URL：/api/changeMyPassword

请求方法：PUT

请求参数：

|   字段名    |     说明     |  类型  | 是否必填 |                    备注                     |
| :---------: | :----------: | :----: | :------: | :-----------------------------------------: |
|  pbl_token  |      -       | String |    是    |                用于验证身份                 |
| oldPassword |   原有密码   | String |    是    |                                             |
| newPassword | 修改后的密码 | String |    是    | 在后端进行校验旧密码是否正确,正确后进行修改 |

返回参数：

| 字段名  | 说明                                                         |  类型  | 备注 |
| :-----: | :----------------------------------------------------------- | :----: | :--: |
|  code   | 200：修改成功<br>209:  原密码错误<br>208：登录超时           |  int   |  -   |
| message | 200：新密码的token<br>209：原有密码错误<br>208：登录超时，请重新登录 | String |  -   |




### 课程管理页面

可复用个人信息管理、展示页面的接口/api/searchMyCourses，来搜索老师教的课程或学生选择的课程



接口URL：/api/searchAllTeachers

请求方法：GET

请求参数：

|  字段名   | 说明 |  类型  | 是否必填 |     备注     |
| :-------: | :--: | :----: | :------: | :----------: |
| pbl_token |  -   | String |    是    | 用于验证身份 |

返回参数：

|  字段名  | 说明                                       |  类型  |                      备注                       |
| :------: | :----------------------------------------- | :----: | :---------------------------------------------: |
|   code   | 200：查询成功<br>208：登录超时             |  int   |                        -                        |
| message  | 200：查询成功<br>208：登录超时，请重新登录 | String |                        -                        |
| teachers | json序列化的User对象数组                   | User[] | User属性有u_id,type, u_name, gender,description |



接口URL：/api/searchOtherCourses

请求方法：GET

请求参数：

|  字段名   |     说明     |  类型  | 是否必填 |         备注         |
| :-------: | :----------: | :----: | :------: | :------------------: |
| pbl_token |      -       | String |    是    |     用于验证身份     |
| pageIndex | 当前请求页码 | String |    是    |          -           |
| pageSize  | 一页元素数量 | String |    是    | 用于计算返回哪些元素 |

返回参数：

|  字段名  | 说明                                 |  类型  |                             备注                             |
| :------: | :----------------------------------- | :----: | :----------------------------------------------------------: |
|   code   | 200：查询成功<br>208：登录超时       |  int   |                              -                               |
| message  | 200：无<br>208：登录超时，请重新登录 | String |                              -                               |
| courses  | json序列化course数组                 | String | 包含属性c_id,t_id,c_name,point, description, status,image_URL<br>这里包含了其它已发布的课程信息，供学生/老师查看<br>需要对课程按照用户是否可见进行过滤 |
| teachers | json序列化user数组                   | String |          至少包含u_id, image, 再加其它字段也可以的           |
|  total   | 课程对象总数量                       |  int   |                        用于计算总页码                        |



接口URL：/api/searchAllCourses

请求方法：GET

请求参数：

|  字段名   |     说明     |  类型  | 是否必填 |         备注         |
| :-------: | :----------: | :----: | :------: | :------------------: |
| pbl_token |      -       | String |    是    |     用于验证身份     |
| pageIndex | 当前请求页码 | String |    是    |          -           |
| pageSize  | 一页元素数量 | String |    是    | 用于计算返回哪些元素 |

返回参数：

|  字段名  | 说明                                 |  类型  |                             备注                             |
| :------: | :----------------------------------- | :----: | :----------------------------------------------------------: |
|   code   | 200：查询成功<br>208：登录超时       |  int   |                              -                               |
| message  | 200：无<br>208：登录超时，请重新登录 | String |                              -                               |
| courses  | json序列化course数组                 | String | 包含属性c_id,t_id,c_name,point, description, status,image_URL<br>这里包含了所有课程信息，供管理员查询 |
| teachers | json序列化user数组                   | String |          至少包含u_id, image, 再加其它字段也可以的           |
|  total   | 课程对象总数量                       |  int   |                        用于计算总页码                        |



接口URL：/api/changeCourseStatus

请求方法：PUT

请求参数：

|  字段名   |      说明      |  类型  | 是否必填 |        备注        |
| :-------: | :------------: | :----: | :------: | :----------------: |
| pbl_token |       -        | String |    是    |    用于验证身份    |
|   c_id    |     课程id     | String |    是    |         -          |
|  status   | 课程修改后状态 | String |    是    | 已发布(1)/删除(-1) |

返回参数：

| 字段名  | 说明                                       |  类型  | 备注 |
| :-----: | :----------------------------------------- | :----: | :--: |
|  code   | 200：修改成功<br>208：登录超时             |  int   |  -   |
| message | 200：修改成功<br>208：登录超时，请重新登录 | String |  -   |



接口URL：/api/changeCourse

请求方法：PUT

请求参数：

|  字段名   |        说明        |  类型  | 是否必填 |                             备注                             |
| :-------: | :----------------: | :----: | :------: | :----------------------------------------------------------: |
| pbl_token |         -          | String |    是    |                         用于验证身份                         |
|  course   | json序列化课程对象 | String |    是    | 课程对象可用属性c_id,t_id,c_name,point, description<br/>这里包含了课程修改后相关信息 |

返回参数：

| 字段名  | 说明                                       |  类型  | 备注 |
| :-----: | :----------------------------------------- | :----: | :--: |
|  code   | 200：修改成功<br>208：登录超时             |  int   |  -   |
| message | 200：修改成功<br>208：登录超时，请重新登录 | String |  -   |



接口URL：/api/addCourse

请求方法：POST

请求参数：

|  字段名   |        说明        |     类型      | 是否必填 |                             备注                             |
| :-------: | :----------------: | :-----------: | :------: | :----------------------------------------------------------: |
| pbl_token |         -          |    String     |    是    |                         用于验证身份                         |
|  course   | json序列化课程对象 |    String     |    是    | 课程对象可用属性t_id,c_name,point, description<br/>这里包含了课程创建时收集的相关信息 |
|   image   |    课程封面图像    | MultipartFile |    是    |                              -                               |

返回参数：

|  字段名   | 说明                                           |  类型  | 备注 |
| :-------: | :--------------------------------------------- | :----: | :--: |
|   code    | 200：课程创建成功<br>208：登录超时             |  int   |  -   |
|  message  | 200：课程创建成功<br>208：登录超时，请重新登录 | String |  -   |
|   c_id    | 新建课程id                                     |  int   |  -   |
| image_URL | 新建课程封面图像地址                           | String |  -   |



接口URL：/api/joinCourse

请求方法：POST

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   s_id    | 学生id | String |    是    |      -       |
|   c_id    | 课程id | String |    是    |      -       |

返回参数：

| 字段名  | 说明                                           |  类型  | 备注 |
| :-----: | :--------------------------------------------- | :----: | :--: |
|  code   | 200：成功加入课程<br>208：登录超时             |  int   |  -   |
| message | 200：成功加入课程<br>208：登录超时，请重新登录 | String |  -   |

### 项目管理页面

#### 项目展示页面

接口URL：/api/searchAllMyCourses

请求方法：GET

请求参数：

|  字段名   | 说明 |  类型  | 是否必填 |     备注     |
| :-------: | :--: | :----: | :------: | :----------: |
| pbl_token |  -   | String |    是    | 用于验证身份 |

返回参数：

| 字段名  | 说明                                         |  类型  |                             备注                             |
| :-----: | :------------------------------------------- | :----: | :----------------------------------------------------------: |
|  code   | 200：查询成功<br>208：登录超时               |  int   |                              -                               |
| message | 200：无<br>208：登录超时，请重新登录         | String |                              -                               |
|  type   | 200：用户类型                                | String |                            S/T/A                             |
| courses | json序列化Course数组，但是只需要c_id和c_name | String | [{c_id: number, c_name: string}, {c_id: number, c_name: string}, ...]<br>学生和教师用户需要返回该用户相关的课程，管理员用户需要返回**所有**课程 |



接口URL：/api/searchProject

请求方法：GET

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   c_id    | 课程id | String |    是    |      -       |

返回参数：

|    字段名    | 说明                                            |  类型  |                             备注                             |
| :----------: | :---------------------------------------------- | :----: | :----------------------------------------------------------: |
|     code     | 200：查询成功<br>208：登录超时                  |  int   |                              -                               |
|   message    | 200：无<br>208：登录超时，请重新登录            | String |                              -                               |
|     type     | 200：用户类型                                   | String |                            S/T/A                             |
| project_take | 学生已加入项目：p_id<br>学生未加入项目/其它：-1 |  int   |                              -                               |
|   projects   | json序列化Project数组                           | String | Project对象包含属性p_id,c_id,p_name,description, grading_status, teacher_grade_ratio,self_grade_ratio, mutual_grade_ratio |




接口URL：/api/createProject

请求方法：POST

请求参数：

|  字段名   |                             说明                             |  类型  | 是否必填 |                             备注                             |
| :-------: | :----------------------------------------------------------: | :----: | :------: | :----------------------------------------------------------: |
| pbl_token |                              -                               | String |    是    |                         用于验证身份                         |
|  project  |                    json序列化Project对象                     | String |    是    | Project对象包含属性p_id,c_id,p_name,description, grading_status, teacher_grade_ratio, self_grade_ratio, mutual_grade_ratio<br>p_id为-1 |
|  grades   | 200：教师评分细则，json序列化GradeSystem对象数组<br/>其它：无 | String |    是    |    GradeSystem对象的属性为：item_id,description,max_grade    |

返回参数：

| 字段名  | 说明                                                        |  类型  | 备注 |
| :-----: | :---------------------------------------------------------- | :----: | :--: |
|  code   | 200：创建成功<br>208：登录超时<br>209：创建失败             |  int   |  -   |
| message | 200：创建成功<br>208：登录超时，请重新登录<br>209：创建失败 | String |  -   |
|  p_id   | 创建成功时新建项目的p_id                                    |  int   |  -   |



接口URL：/api/deleteProject

请求方法：DELETE

请求参数：

|  字段名   |      说明      |  类型  | 是否必填 |     备注     |
| :-------: | :------------: | :----: | :------: | :----------: |
| pbl_token |       -        | String |    是    | 用于验证身份 |
|   p_id    | 要删除的项目id | String |    是    |      -       |

返回参数：

| 字段名  | 说明                                                  |  类型  | 备注 |
| :-----: | :---------------------------------------------------- | :----: | :--: |
|  code   | 200：删除成功<br/>208：登录超时<br/>209：删除失败     |  int   |  -   |
| message | 200：无<br>208：登录超时，请重新登录<br>209：删除失败 | String |  -   |



接口URL：/api/changeProject

请求方法：POST

请求参数：

|  字段名   |                             说明                             |  类型  | 是否必填 |                             备注                             |
| :-------: | :----------------------------------------------------------: | :----: | :------: | :----------------------------------------------------------: |
| pbl_token |                              -                               | String |    是    |                         用于验证身份                         |
|  project  |                    json序列化Project对象                     | String |    是    | Project对象包含属性p_id,c_id,p_name,description, grading_status, teacher_grade_ratio, self_grade_ratio, mutual_grade_ratio |
|  grades   | 200：教师评分细则，json序列化GradeSystem对象数组<br/>其它：无 | String |    是    | GradeSystem对象的属性为：p_id,item_id,description,max_grade  |

返回参数：

| 字段名  | 说明                                              |  类型  | 备注 |
| :-----: | :------------------------------------------------ | :----: | :--: |
|  code   | 200：修改成功<br/>208：登录超时<br/>209：修改失败 |  int   |  -   |
| message | 200：无<br>208：登录超时，请重新登录<br>209：失败 | String |  -   |



接口URL：/api/joinProject

请求方法：POST

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   p_id    | 项目id | String |    是    |      -       |

返回参数：

| 字段名  | 说明                                 |  类型  | 备注 |
| :-----: | :----------------------------------- | :----: | :--: |
|  code   | 200：加入成功<br/>208：登录超时      |  int   |  -   |
| message | 200：无<br>208：登录超时，请重新登录 | String |  -   |



接口URL：/api/searchProjectGradeSystem

请求方法：GET

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   p_id    | 项目id | String |    是    |      -       |

返回参数：

| 字段名  | 说明                                                   |  类型  |                             备注                             |
| :-----: | :----------------------------------------------------- | :----: | :----------------------------------------------------------: |
|  code   | 200：查询成功<br>208：登录超时                         |  int   |                              -                               |
| message | 200：无<br>208：登录超时，请重新登录                   | String |                              -                               |
| grades  | 200：教师评分细则，json序列化grade对象数组<br/>208：无 | String | grade对象的可用属性为：item_id,description,i_grade,max_grade<br/>这里i_grade(学生得分)可不填 |



#### 项目详情页面

##### 任务页面



接口URL：/api/searchAssignment

请求方法：GET

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   p_id    | 项目id | String |    是    |      -       |

返回参数：

|    字段名     | 说明                                                      |  类型  |                             备注                             |
| :-----------: | :-------------------------------------------------------- | :----: | :----------------------------------------------------------: |
|     code      | 200：查询成功<br/>208：登录超时<br/>209：查询失败         |  int   |                              -                               |
|    message    | 200：查询成功<br>208：登录超时请重新登录<br>209：查询失败 | String |                              -                               |
|  assignments  | 200：json序列化Assignment数组(按照a_id排序)<br>其它：无   | String | assignment类型包含属性：a_id,a_name,a_description,<br>importance,a_start_date,a_end_date |
| studentStatus | 200：json序列化boolean数组(按照a_id排序)<br>其它：无      | String |      对应上面学生的完成状态：完成-true<br>未完成-false       |
|  urgeStatus   | 200：学生每个任务的urge情况(按照a_id排序)                 | String |      对应上面学生的urge状态：完成-true<br/>未完成-false      |
|    doneNum    | 200：每个任务的学生完成人数(按照a_id排序)                 | String |                              -                               |
|   totalNum    | 200：项目总人数                                           |  int   |                              -                               |

> 还需要student_assignment里的urge信息和分配给的学生的id和name，可以研究一下怎么样的形式返回来比较好



接口URL：/api/searchGrouperAssignment

请求方法：GET

请求参数：

|   字段名   |        说明        |  类型  | 是否必填 |     备注     |
| :--------: | :----------------: | :----: | :------: | :----------: |
| pbl_token  |         -          | String |    是    | 用于验证身份 |
|    p_id    |       项目id       | String |    是    |      -       |
| grouper_id | 需要查询的组员的id | String |    是    |      -       |

返回参数：

|    字段名     | 说明                                       |  类型  |                             备注                             |
| :-----------: | :----------------------------------------- | :----: | :----------------------------------------------------------: |
|     code      | 200：查询成功<br/>208：登录超时            |  int   |                              -                               |
|    message    | 200：查询成功<br>208：登录超时请重新登录   | String |                              -                               |
| studentStatus | 200：boolean数组(按照a_id排序)<br>其它：无 | String | 学生在该项目下所有assignment的完成状态：<br>完成-true;未完成-false |



接口URL：/api/searchAssignmentDone

请求方法：GET

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   p_id    | 项目id | String |    是    |      -       |
|   a_id    | 任务id | String |    是    |      -       |

返回参数：

|   字段名    | 说明                                                        |  类型  | 备注 |
| :---------: | :---------------------------------------------------------- | :----: | :--: |
|    code     | 200：查询成功<br/>208：登录超时<br/>209：查询失败           |  int   |  -   |
|   message   | 200：查询成功<br>208：登录超时，请重新登录<br>209：查询失败 | String |  -   |
| assignments | 200：完成该任务的总人数<br>其它：无                         |  int   |  -   |
|  totalNum   | 200：项目总人数<br>其它：无                                 |  int   |  -   |



接口URL：/api/createAssignment

请求方法：POST

请求参数：

|   字段名   |           说明           |  类型  | 是否必填 |                             备注                             |
| :--------: | :----------------------: | :----: | :------: | :----------------------------------------------------------: |
| pbl_token  |            -             | String |    是    |                         用于验证身份                         |
| assignment | json序列化assignment对象 | String |    是    | assignment对象包含属性：a_id,p_id,a_name,a_description,<br/>importance,a_start_date,a_end_date<br>其中a_id为-1 |

返回参数：

| 字段名  | 说明                                                         |  类型  | 备注 |
| :-----: | :----------------------------------------------------------- | :----: | :--: |
|  code   | 200：创建任务成功<br/>208：登录超时<br/>209：创建任务失败    |  int   |  -   |
| message | 200：创建任务成功<br>208：登录超时，请重新登录<br>209：修改任务失败 | String |  -   |
|  a_id   | 200：新建任务id<br/>208：无<br/>209：无                      |  int   |  -   |



接口URL：/api/createAssignments

请求方法：POST

请求参数：

|   字段名    |             说明             |  类型  | 是否必填 |                             备注                             |
| :---------: | :--------------------------: | :----: | :------: | :----------------------------------------------------------: |
|  pbl_token  |              -               | String |    是    |                         用于验证身份                         |
| assignments | json序列化assignment对象列表 | String |    是    | assignment对象包含属性：a_id,p_id,a_name,a_description,<br/>importance,a_start_date,a_end_date<br>其中a_id为-1 |

返回参数：

|  字段名  | 说明                                                         |  类型  | 备注 |
| :------: | :----------------------------------------------------------- | :----: | :--: |
|   code   | 200：批量创建任务成功<br/>208：登录超时<br/>209：批量创建任务失败 |  int   |  -   |
| message  | 200：批量创建任务成功<br>208：登录超时，请重新登录<br>209：批量创建任务成功 | String |  -   |
| a_idList | 200：新建任务列表id<br/>208：无<br/>209：无                  |  int   |  -   |



接口URL：/api/changeAssignment

请求方法：PUT

请求参数：

|   字段名   |           说明           |  类型  | 是否必填 |                             备注                             |
| :--------: | :----------------------: | :----: | :------: | :----------------------------------------------------------: |
| pbl_token  |            -             | String |    是    |                         用于验证身份                         |
| assignment | json序列化assignment对象 | String |    是    | assignment对象包含属性：a_id,p_id,a_name,a_description,<br/>importance,a_start_date,a_end_date |

返回参数：

| 字段名  | 说明                                                        |  类型  | 备注 |
| :-----: | :---------------------------------------------------------- | :----: | :--: |
|  code   | 200：修改成功<br/>208：登录超时<br/>209：修改失败           |  int   |  -   |
| message | 200：修改成功<br>208：登录超时，请重新登录<br>209：修改失败 | String |  -   |



接口URL：/api/doneAssignment

请求方法：PUT

请求参数：

|  字段名   |     说明      |  类型  | 是否必填 |         备注         |
| :-------: | :-----------: | :----: | :------: | :------------------: |
| pbl_token |       -       | String |    是    |     用于验证身份     |
|   p_id    |  Project id   | String |    是    | 指定任务所属的项目id |
|   a_id    | Assignment id | String |    是    | 指定完成的assignment |

返回参数：

| 字段名  | 说明                                           |  类型  | 备注 |
| :-----: | :--------------------------------------------- | :----: | :--: |
|  code   | 200：标记完成成功<br/>208：登录超时            |  int   |  -   |
| message | 200：标记完成成功<br>208：登录超时，请重新登录 | String |  -   |



接口URL：/api/changeAssignments

请求方法：PUT

请求参数：

|   字段名    |             说明             |  类型  | 是否必填 |                             备注                             |
| :---------: | :--------------------------: | :----: | :------: | :----------------------------------------------------------: |
|  pbl_token  |              -               | String |    是    |                         用于验证身份                         |
| assignments | json序列化assignment对象列表 | String |    是    | assignment对象包含属性：a_id,p_id,a_name,a_description,<br/>importance,a_start_date,a_end_date |

返回参数：

| 字段名  | 说明                                                         |  类型  | 备注 |
| :-----: | :----------------------------------------------------------- | :----: | :--: |
|  code   | 200：批量修改任务成功<br/>208：登录超时<br/>209：批量修改任务失败 |  int   |  -   |
| message | 200：批量修改任务成功<br>208：登录超时，请重新登录<br>209：批量修改任务失败 | String |  -   |



接口URL：/api/deleteAssignment

请求方法：DELETE

请求参数：

|  字段名   |     说明      |  类型  | 是否必填 |     备注     |
| :-------: | :-----------: | :----: | :------: | :----------: |
| pbl_token |       -       | String |    是    | 用于验证身份 |
|   a_id    | assignment id | String |    是    |      -       |
|   p_id    |  project id   | String |    是    |      -       |

返回参数：

| 字段名  | 说明                                                         |  类型  | 备注 |
| :-----: | :----------------------------------------------------------- | :----: | :--: |
|  code   | 200：删除成功<br/>208：登录超时<br/>209：删除失败            |  int   |  -   |
| message | 200：删除成功<br/>208：登录超时，请重新登录<br/>209：删除失败 | String |  -   |



接口URL：/api/deleteAssignments

请求方法：DELETE

请求参数：

|  字段名   |        说明        |  类型  | 是否必填 |     备注     |
| :-------: | :----------------: | :----: | :------: | :----------: |
| pbl_token |         -          | String |    是    | 用于验证身份 |
| a_idList  | assignment id 列表 | String |    是    |      -       |
|   p_id    |     project id     | String |    是    |      -       |

返回参数：

| 字段名  | 说明                                                         |  类型  | 备注 |
| :-----: | :----------------------------------------------------------- | :----: | :--: |
|  code   | 200：批量删除任务成功<br/>208：登录超时<br/>209：批量删除任务失败 |  int   |  -   |
| message | 200：批量删除任务成功<br/>208：登录超时，请重新登录<br/>209：批量删除任务失败 | String |  -   |



接口URL：/api/modifyAssignments

请求方法：PUT

请求参数：

|     字段名     |                    说明                    |  类型  | 是否必填 |            备注            |
| :------------: | :----------------------------------------: | :----: | :------: | :------------------------: |
|   pbl_token    |                     -                      | String |    是    |        用于验证身份        |
| assignmentList |          序列化的 assignment 列表          | String |    是    |             -              |
|     opList     | 序列化的操作列表（按assignment的list排序） | String |    是    | 操作包含modify，delete两种 |

返回参数：

| 字段名  | 说明                                                         |  类型  | 备注 |
| :-----: | :----------------------------------------------------------- | :----: | :--: |
|  code   | 200：批量修改任务成功<br/>208：登录超时<br/>209：批量修改任务失败 |  int   |  -   |
| message | 200：批量修改任务成功<br/>208：登录超时，请重新登录<br/>209：批量修改任务失败 | String |  -   |



接口URL：/api/urgeAssignment

请求方法：PUT

请求参数：

|  字段名   |     说明      |  类型  | 是否必填 |     备注     |
| :-------: | :-----------: | :----: | :------: | :----------: |
| pbl_token |       -       | String |    是    | 用于验证身份 |
|   a_id    | assignment id |  int   |    是    |      -       |
|   p_id    |  project id   |  int   |    是    |      -       |

返回参数：

| 字段名  | 说明                                                         |  类型  | 备注 |
| :-----: | :----------------------------------------------------------- | :----: | :--: |
|  code   | 200：催促消息发送成功<br/>208：登录超时<br/>209：催促消息发送失败 |  int   |  -   |
| message | 200：催促消息发送成功<br/>208：登录超时，请重新登录<br/>209：催促消息发送失败 | String |  -   |



接口URL：/api/applyUrge

请求方法：PUT

请求参数：

|  字段名   |     说明      |  类型  | 是否必填 |     备注     |
| :-------: | :-----------: | :----: | :------: | :----------: |
| pbl_token |       -       | String |    是    | 用于验证身份 |
|   a_id    | assignment id | String |    是    |      -       |
|   p_id    |  project id   | String |    是    |      -       |

返回参数：

| 字段名  | 说明                                                |  类型  | 备注 |
| :-----: | :-------------------------------------------------- | :----: | :--: |
|  code   | 200：成功回应催促消息<br/>208：登录超时             |  int   |  -   |
| message | 200：成功回应催促消息<br/>208：登录超时，请重新登录 | String |  -   |



接口URL：/api/countDone

请求方法：GET

请求参数：

|  字段名   |    说明    |  类型  | 是否必填 |     备注     |
| :-------: | :--------: | :----: | :------: | :----------: |
| pbl_token |     -      | String |    是    | 用于验证身份 |
|   p_id    | project id | String |    是    |      -       |

返回参数：

|  字段名   | 说明                                                         |  类型  | 备注 |
| :-------: | :----------------------------------------------------------- | :----: | :--: |
|   code    | 200：成功统计项目完成人数<br/>208：登录超时<br/>209：未能统计项目完成人数 |  int   |  -   |
|  message  | 200：成功统计项目完成人数<br/>208：登录超时，请重新登录<br/>209：未能统计项目完成人数 | String |  -   |
| done_num  | 200：项目完成人数(所有assignment完成的人)<br>其它：-1        |  int   |  -   |
| total_num | 200：项目总人数<br>其它：-1                                  |  int   |  -   |



##### 成员页面



接口URL：/api/searchGroupers

请求方法：GET

请求参数：

|  字段名   |    说明    |  类型  | 是否必填 |     备注     |
| :-------: | :--------: | :----: | :------: | :----------: |
| pbl_token |     -      | String |    是    | 用于验证身份 |
|   p_id    | project id | String |    是    |      -       |

返回参数：

|  字段名  | 说明                                  |  类型  |                 备注                  |
| :------: | :------------------------------------ | :----: | :-----------------------------------: |
|   code   | 200：搜索成功<br/>208：登录超时       |  int   |                   -                   |
| message  | 200：无<br/>208：登录超时，请重新登录 | String |                   -                   |
| groupers | 200：json序列化User对象数组           | String | User对象中可用属性为：<br>u_id,u_name |
|  leader  | 200：组长s_id                         | String |                   -                   |



这里可以复用上面/api/searchProjectGradeSystem，获得该项目的评分方式，再展示相应的接口



接口URL：/api/searchEvaluateBySelf

请求方法：GET

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   p_id    | 项目id | String |    是    |      -       |

返回参数：

| 字段名  | 说明                                                   |  类型  | 备注 |
| :-----: | :----------------------------------------------------- | :----: | :--: |
|  code   | 200：无<br/>208：登录超时<br>209：暂未评分             |  int   |  -   |
| message | 200：无<br/>208：登录超时，请重新登录<br>209：暂未评分 | String |  -   |
|  grade  | 200：自评评分<br>其它：-1                              | double |  -   |



接口URL：/api/evaluateSelf

请求方法：POST

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |      备注       |
| :-------: | :----: | :----: | :------: | :-------------: |
| pbl_token |   -    | String |    是    |  用于验证身份   |
|   p_id    | 项目id | String |    是    |        -        |
|   grade   |   -    | String |    是    | 0-100之间的数字 |

返回参数：

| 字段名  | 说明                                        |  类型  | 备注 |
| :-----: | :------------------------------------------ | :----: | :--: |
|  code   | 200：评价成功<br/>208：登录超时             |  int   |  -   |
| message | 200：评价成功<br/>208：登录超时，请重新登录 | String |  -   |



接口URL：/api/searchEvaluateByOther

请求方法：GET

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   p_id    | 项目id | String |    是    |      -       |

返回参数：

|  字段名  | 说明                                                   |  类型  | 备注 |
| :------: | :----------------------------------------------------- | :----: | :--: |
|   code   | 200：无<br/>208：登录超时<br>209：暂未评分             |  int   |  -   |
| message  | 200：无<br/>208：登录超时，请重新登录<br>209：暂未评分 | String |  -   |
|  grade   | 200：互评的平均评分<br>208：-1<br>209：-1              | double |  -   |
| doneNum  | 200：已评分人数<br>208：-1<br>209：0                   |  int   |  -   |
| totalNum | 200：项目总人数<br>208：-1<br>209：项目总人数          |  int   |  -   |



接口URL：/api/evaluateOther

请求方法：POST

请求参数：

|  字段名   |      说明      |  类型  | 是否必填 |         备注          |
| :-------: | :------------: | :----: | :------: | :-------------------: |
| pbl_token |       -        | String |    是    |     用于验证身份      |
|   p_id    |     项目id     | String |    是    |           -           |
|   u_id    | 被评分用户的id | String |    是    |           -           |
|   grade   |       -        | String |    是    | 0-100之间的double小数 |

返回参数：

| 字段名  | 说明                                        |  类型  | 备注 |
| :-----: | :------------------------------------------ | :----: | :--: |
|  code   | 200：评价成功<br/>208：登录超时             |  int   |  -   |
| message | 200：评价成功<br/>208：登录超时，请重新登录 | String |  -   |



接口URL：/api/searchEvaluateByTeacher

请求方法：GET

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   p_id    | 项目id | String |    是    |      -       |

返回参数：

| 字段名  | 说明                                                     |  类型  |                           备注                           |
| :-----: | :------------------------------------------------------- | :----: | :------------------------------------------------------: |
|  code   | 200：无<br/>208：登录超时<br>209：教师未评分             |  int   |                            -                             |
| message | 200：无<br/>208：登录超时，请重新登录<br>209：教师未评分 | String |                            -                             |
| grades  | 200：教师评分细则，json序列化grade对象数组<br>其它：无   | String | grade对象的属性为：item_id,description,i_grade,max_grade |



接口URL：/api/searchGrade

请求方法：GET

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   p_id    | 项目id | String |    是    |      -       |

返回参数：

| 字段名  | 说明                                                         |  类型  | 备注 |
| :-----: | :----------------------------------------------------------- | :----: | :--: |
|  code   | 200：无<br/>208：登录超时<br>209：未生成最终评分             |  int   |  -   |
| message | 200：无<br/>208：登录超时，请重新登录<br>209：未生成最终评分 | String |  -   |
|  grade  | 200：最终评分<br>其它：-1                                    | double |  -   |



##### 讨论版页面

接口URL：/api/searchDiscussions

请求方法：GET

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   p_id    | 项目id | String |    是    |      -       |

返回参数：

|   字段名    | 说明                                                     |  类型  |                        备注                         |
| :---------: | :------------------------------------------------------- | :----: | :-------------------------------------------------: |
|    code     | 200：无<br/>208：登录超时                                |  int   |                          -                          |
|   message   | 200：无<br/>208：登录超时，请重新登录                    | String |                          -                          |
| discussions | 200：json序列化discussion数组(由时间远近排列)<br>208：无 | String | discussion对象包含属性：d_id,p_id,u_id,content,time |



接口URL：/api/createDiscussion

请求方法：POST

请求参数：

|   字段名   |            说明            |  类型  | 是否必填 |                             备注                             |
| :--------: | :------------------------: | :----: | :------: | :----------------------------------------------------------: |
| pbl_token  |             -              | String |    是    |                         用于验证身份                         |
| discussion | json序列化的discussion对象 | String |    是    | discussion对象包含属性：d_id,p_id,u_id,content,time<br>其中d_id=-1 |

返回参数：

| 字段名  | 说明                                        |  类型  | 备注 |
| :-----: | :------------------------------------------ | :----: | :--: |
|  code   | 200：发布成功<br/>208：登录超时             |  int   |  -   |
| message | 200：发布成功<br/>208：登录超时，请重新登录 | String |  -   |
|  d_id   | 200：新创建的discussion id<br>208：-1       |  int   |  -   |



接口URL：/api/deleteDiscussion

请求方法：DELETE

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   d_id    | 讨论id | String |    是    |      -       |
|   p_id    | 项目id | String |    是    |      -       |

返回参数：

| 字段名  | 说明                                                         |  类型  | 备注 |
| :-----: | :----------------------------------------------------------- | :----: | :--: |
|  code   | 200：删除成功<br/>208：登录超时<br>209：删除失败             |  int   |  -   |
| message | 200：删除成功<br/>208：登录超时，请重新登录<br>209：删除失败 | String |  -   |



接口URL：/api/searchReply

请求方法：GET

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   d_id    | 讨论id | String |    是    |      -       |

返回参数：

| 字段名  | 说明                                                    |  类型  |                      备注                      |
| :-----: | :------------------------------------------------------ | :----: | :--------------------------------------------: |
|  code   | 200：无<br/>208：登录超时                               |  int   |                       -                        |
| message | 200：无<br/>208：登录超时，请重新登录                   | String |                       -                        |
| replies | 200：json序列化reply对象数组(由时间远近排列)<br>208：无 | String | reply对象包含属性：r_id,d_id,u_id,content,time |



接口URL：/api/createReply

请求方法：POST

请求参数：

|  字段名   |         说明          |  类型  | 是否必填 |                             备注                             |
| :-------: | :-------------------: | :----: | :------: | :----------------------------------------------------------: |
| pbl_token |           -           | String |    是    |                         用于验证身份                         |
| reply对象 | json序列化的reply对象 | String |    是    | reply对象包含属性：r_id,d_id,u_id,content,time<br>其中r_id=-1 |

返回参数：

| 字段名  | 说明                                        |  类型  | 备注 |
| :-----: | :------------------------------------------ | :----: | :--: |
|  code   | 200：发布成功<br/>208：登录超时             |  int   |  -   |
| message | 200：发布成功<br/>208：登录超时，请重新登录 | String |  -   |
|  r_id   | 200：新创建的reply id<br>208：-1            |  int   |  -   |



接口URL：/api/deleteReply

请求方法：DELETE

请求参数：

|  字段名   |   说明   |  类型  | 是否必填 |     备注     |
| :-------: | :------: | :----: | :------: | :----------: |
| pbl_token |    -     | String |    是    | 用于验证身份 |
|   r_id    | 回复帖id |  int   |    是    |      -       |
|   p_id    |  项目id  |  int   |    是    |      -       |

返回参数：

| 字段名  | 说明                                                         |  类型  | 备注 |
| :-----: | :----------------------------------------------------------- | :----: | :--: |
|  code   | 200：删除成功<br/>208：登录超时<br>209：删除失败             |  int   |  -   |
| message | 200：删除成功<br/>208：登录超时，请重新登录<br>209：删除失败 | String |  -   |



##### 文件管理空间页面

接口URL：/api/searchAllFiles

请求方法：GET

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   p_id    | 项目id | String |    是    |      -       |

返回参数：

| 字段名  | 说明                                                         |  类型  |                             备注                             |
| :-----: | :----------------------------------------------------------- | :----: | :----------------------------------------------------------: |
|  code   | 200：上传成功<br/>208：登录超时<br>209：上传失败             |  int   |                              -                               |
| message | 200：上传成功<br/>208：登录超时，请重新登录<br>209：文件上传失败 | String |                              -                               |
|  files  | 200：json序列化file对象数组<br>208：null<br>209：null        | String | file对象属性包含：<br>f_id,p_id,u_id,f_name,description,file_URL |



接口URL：/api/uploadFile

请求方法：POST

请求参数：

|   字段名    |     说明     |     类型      | 是否必填 |     备注     |
| :---------: | :----------: | :-----------: | :------: | :----------: |
|  pbl_token  |      -       |    String     |    是    | 用于验证身份 |
|   f_name    |    文件名    |    String     |    是    |      -       |
|    p_id     |    项目id    |    String     |    是    |      -       |
|    file     | 要上传的文件 | MultipartFile |    是    |      -       |
| description |   文件描述   |    String     |    是    |      -       |

返回参数：

| 字段名  | 说明                                                         |  类型  |                             备注                             |
| :-----: | :----------------------------------------------------------- | :----: | :----------------------------------------------------------: |
|  code   | 200：上传成功<br/>208：登录超时<br>209：上传失败             |  int   |                              -                               |
| message | 200：上传成功<br/>208：登录超时，请重新登录<br>209：文件上传失败 | String |                              -                               |
|  file   | 200：json序列化file对象<br>208：null<br>209：null            | String | file对象属性包含：<br>f_id,p_id,u_id,f_name,description,file_URL |



接口URL：/api/deleteFile

请求方法：DELETE

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   f_id    | 文件id | String |    是    |      -       |
|   p_id    | 项目id | String |    是    |      -       |

返回参数：

| 字段名  | 说明                                                         |  类型  | 备注 |
| :-----: | :----------------------------------------------------------- | :----: | :--: |
|  code   | 200：删除成功<br/>208：登录超时<br>209：删除失败             |  int   |  -   |
| message | 200：删除成功<br/>208：登录超时，请重新登录<br>209：删除失败 | String |  -   |



接口URL：/api/downloadFile

请求方法：GET

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   f_id    | 文件id | String |    是    |      -       |
|   p_id    | 项目id | String |    是    |      -       |



返回参数：

|  字段名  | 说明                        |  类型  |                             备注                             |
| :------: | :-------------------------- | :----: | :----------------------------------------------------------: |
|   code   | 200：成功<br/>208：登录超时 |  int   |                              -                               |
| message  |                             | String |                              -                               |
| file_str | 读取文件获得的字符串        | String | 预想的下载前端实现，供参考：https://www.jianshu.com/p/05bb4127b098 |




### 评分页面

这里可以复用项目展示页面的接口：/api/searchProject，获得本课程下所有的项目



接口URL：/api/countAssignmentDone

请求方法：GET

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   p_id    | 项目id | String |    是    |      -       |

返回参数：

|       字段名       | 说明                                                      |  类型  |                        备注                        |
| :----------------: | :-------------------------------------------------------- | :----: | :------------------------------------------------: |
|        code        | 200：查询成功<br/>208：登录超时<br/>209：查询失败         |  int   |                         -                          |
|      message       | 200：查询成功<br>208：登录超时请重新登录<br>209：查询失败 | String |                         -                          |
| totalAssignmentNum | 200：项目总任务数<br>其它：-1                             |  int   |                         -                          |
|  doneInformations  | 200：json序列化的学生完成情况数组<br>其它：无             | String | DoneInformation对象包含属性<br>s_id,s_name,doneNum |



接口URL：/api/countDiscussion

请求方法：GET

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   p_id    | 项目id | String |    是    |      -       |

返回参数：

|       字段名        | 说明                                                      |  类型  |                           备注                           |
| :-----------------: | :-------------------------------------------------------- | :----: | :------------------------------------------------------: |
|        code         | 200：查询成功<br/>208：登录超时<br/>209：查询失败         |  int   |                            -                             |
|       message       | 200：查询成功<br>208：登录超时请重新登录<br>209：查询失败 | String |                            -                             |
|    maxDiscussNum    | 200：最大讨论数<br>其它：-1                               |  int   |                            -                             |
| discussInformations | 200：json序列化的学生讨论情况数组<br>其它：无             | String | DiscussInformation对象包含属性<br>s_id,s_name,discussNum |



接口URL：/api/getGradeItems

请求方法：GET

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   p_id    | 项目id | String |    是    |      -       |

返回参数：

| 字段名  | 说明                                                      |  类型  |                          备注                          |
| :-----: | :-------------------------------------------------------- | :----: | :----------------------------------------------------: |
|  code   | 200：查询成功<br/>208：登录超时<br/>209：查询失败         |  int   |                           -                            |
| message | 200：查询成功<br>208：登录超时请重新登录<br>209：查询失败 | String |                           -                            |
| grades  | 200：json序列化GradeSystem对象<br>其它：null              | String | GradeSystem对象的属性为：item_id,description,max_grade |



接口URL：/api/evaluateByTeacher

请求方法：POST

请求参数：

|  字段名   |              说明              |  类型  | 是否必填 |                             备注                             |
| :-------: | :----------------------------: | :----: | :------: | :----------------------------------------------------------: |
| pbl_token |               -                | String |    是    |                         用于验证身份                         |
|   p_id    |             项目id             | String |    是    |                              -                               |
|   s_id    |             学生id             | String |    是    |                              -                               |
|  grades   | json序列化StudentGrade对象数组 | String |    是    | StudentGrade对象的属性为：item_id,p_id,s_id,description,grade<br>这里的description可以不填 |

返回参数：

| 字段名  | 说明                                                         |  类型  | 备注 |
| :-----: | :----------------------------------------------------------- | :----: | :--: |
|  code   | 200：评分成功<br/>208：登录超时<br>209：评分失败             |  int   |  -   |
| message | 200：评分成功<br/>208：登录超时，请重新登录<br>209：评分失败 | String |  -   |

### 用户管理页面

接口URL：/api/searchAllUsers

请求方法：GET

请求参数：

|  字段名   | 说明 |  类型  | 是否必填 |     备注     |
| :-------: | :--: | :----: | :------: | :----------: |
| pbl_token |  -   | String |    是    | 用于验证身份 |

返回参数：

| 字段名  | 说明                                                         |  类型  |                      备注                       |
| :-----: | :----------------------------------------------------------- | :----: | :---------------------------------------------: |
|  code   | 200：查询成功<br>208：登录超时                               |  int   |                        -                        |
| message | 200：查询成功<br>208：登录超时，请重新登录                   | String |                        -                        |
|  users  | json序列化的User对象数组                                     | String | User属性有u_id,type, u_name, gender,description |
| images  | 200时：json序列化图像url数组，顺序与用户数组一致<br>208时：空字符串 | String |                        -                        |



接口URL：/api/getAllProjects

请求方法：GET

请求参数：

|  字段名   | 说明 |  类型  | 是否必填 |     备注     |
| :-------: | :--: | :----: | :------: | :----------: |
| pbl_token |  -   | String |    是    | 用于验证身份 |

返回参数：

|   字段名    | 说明                                       |  类型  |                             备注                             |
| :---------: | :----------------------------------------- | :----: | :----------------------------------------------------------: |
|    code     | 200：查询成功<br>208：登录超时             |  int   |                              -                               |
|   message   | 200：查询成功<br>208：登录超时，请重新登录 | String |                              -                               |
| projectList | json序列化的Project对象数组                | String | Project对象包含属性p_id,c_id,p_name,description, grading_status, teacher_grade_ratio,self_grade_ratio, mutual_grade_ratio |



接口URL：/api/getAllCourses

请求方法：GET

请求参数：

|  字段名   | 说明 |  类型  | 是否必填 |     备注     |
| :-------: | :--: | :----: | :------: | :----------: |
| pbl_token |  -   | String |    是    | 用于验证身份 |

返回参数：

|   字段名   | 说明                                       |  类型  |                             备注                             |
| :--------: | :----------------------------------------- | :----: | :----------------------------------------------------------: |
|    code    | 200：查询成功<br>208：登录超时             |  int   |                              -                               |
|  message   | 200：查询成功<br>208：登录超时，请重新登录 | String |                              -                               |
| courseList | json序列化的Course对象数组                 | String | 包含属性c_id,t_id,c_name,point, description, status,image_URL |



接口URL：/api/getAllGradeItems

请求方法：GET

请求参数：

|  字段名   | 说明 |  类型  | 是否必填 |     备注     |
| :-------: | :--: | :----: | :------: | :----------: |
| pbl_token |  -   | String |    是    | 用于验证身份 |

返回参数：

|  字段名  | 说明                                       |  类型  |                 备注                 |
| :------: | :----------------------------------------- | :----: | :----------------------------------: |
|   code   | 200：查询成功<br>208：登录超时             |  int   |                  -                   |
| message  | 200：查询成功<br>208：登录超时，请重新登录 | String |                  -                   |
| itemList | json序列化的int:Object对象数组             | String | 以p_id为键，获得所有项目的gradeitems |



接口URL：/api/changeImage

请求方法：PUT

请求参数：

|  字段名   |  说明  |     类型      | 是否必填 |        备注        |
| :-------: | :----: | :-----------: | :------: | :----------------: |
| pbl_token |   -    |    String     |    是    |    用于验证身份    |
|   u_id    | 学工号 |    String     |    是    |         -          |
|   image   |  头像  | MultipartFile |    否    | 无则修改为默认头像 |

返回参数：

| 字段名  | 说明                                 |  类型  | 备注 |
| :-----: | :----------------------------------- | :----: | :--: |
|  code   | 200：修改成功<br>208：登录超时       |  int   |  -   |
| message | 200：无<br>208：登录超时，请重新登录 | String |  -   |
|  image  | 200：image_URL<br>208：无            | String |  -   |



接口URL：/api/changeInformation

请求方法：PUT

请求参数：

|  字段名   |         说明         |  类型  | 是否必填 |                    备注                     |
| :-------: | :------------------: | :----: | :------: | :-----------------------------------------: |
| pbl_token |          -           | String |    是    |                用于验证身份                 |
|  content  | json序列化的User对象 | String |    是    | 属性有u_id,type, u_name, gender,description |

返回参数：

| 字段名  | 说明                                       |  类型  | 备注 |
| :-----: | :----------------------------------------- | :----: | :--: |
|  code   | 200：修改成功<br>208：登录超时             |  int   |  -   |
| message | 200：修改成功<br>208：登录超时，请重新登录 | String |  -   |



接口URL：/api/addUser

请求方法：POST

请求参数：

|  字段名   |       说明       |     类型      | 是否必填 |                           备注                           |
| :-------: | :--------------: | :-----------: | :------: | :------------------------------------------------------: |
| pbl_token |        -         |    String     |    是    |                       用于验证身份                       |
|   user    | json序列化的User |    String     |    是    | User属性有u_id,type, u_name, gender,description,password |
|   image   |       头像       | MultipartFile |    否    |                    没有则生成默认头像                    |

返回参数：

| 字段名  | 说明                                                |  类型  | 备注 |
| :-----: | :-------------------------------------------------- | :----: | :--: |
|  code   | 200：添加成功<br>208：登录超时<br>209：用户名已存在 |  int   |  -   |
| message | 200：添加成功<br>其它：返回错误信息                 | String |  -   |
|  image  | 200：携带图像url<br>其它：空字符串                  | String |  -   |



接口URL：/api/getUserByUid

请求方法：GET

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   u_id    | 学工号 | String |    是    |      -       |

返回参数：

| 字段名  | 说明                                |  类型  | 备注 |
| :-----: | :---------------------------------- | :----: | :--: |
|  code   | 200：获取成功<br>208：登录超时      |  int   |  -   |
| message | 200：获取成功<br>其它：返回错误信息 | String |  -   |
|  user   | 200：user对象<br>其它：空字符串     | String |  -   |



接口URL：/api/getStudentDiscussonAndAssignmentCountByPid

请求方法：GET

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   p_id    | 项目id | String |    是    |      -       |

返回参数：

|       字段名        | 说明                                |  类型  |                 备注                  |
| :-----------------: | :---------------------------------- | :----: | :-----------------------------------: |
|        code         | 200：获取成功<br>208：登录超时      |  int   |                   -                   |
|       message       | 200：获取成功<br>其它：返回错误信息 | String |                   -                   |
|   discussionCount   | 200：成员讨论数<br>其它：空字符串   | String | 如果有人未发布讨论，则对应的讨论数为0 |
| assignmentDoneCount | 200：任务情况<br>其它：返回错误信息 | String |                   -                   |



接口URL：/api/updateTeacherGrade

请求方法：PUT

请求参数：

|     字段名      |        说明        |  类型  | 是否必填 |     备注     |
| :-------------: | :----------------: | :----: | :------: | :----------: |
|    pbl_token    |         -          | String |    是    | 用于验证身份 |
| student_project | 学生项目总评分list | String |    是    |      -       |

返回参数：

| 字段名  | 说明                                |  类型  | 备注 |
| :-----: | :---------------------------------- | :----: | :--: |
|  code   | 200：更新成功<br>208：登录超时      |  int   |  -   |
| message | 200：更新成功<br>其它：返回错误信息 | String |  -   |



接口URL：/api/SelfAndMutualevaluateScore

请求方法：GET

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   p_id    | 项目id | String |    是    |      -       |

返回参数：

|          字段名           | 说明                                                    |  类型  |               备注                |
| :-----------------------: | :------------------------------------------------------ | :----: | :-------------------------------: |
|           code            | 200：获取成功<br>208：登录超时                          |  int   |                 -                 |
|          message          | 200：获取成功<br>208：权限不够<br>其它：返回错误信息    | String |                 -                 |
| selfAndMutualInformations | 200：项目中所有成员自评互评的所有得分<br>其它：空字符串 | String | 如果暂未评分则对应的map中返回null |



接口URL：/api/getItemsByPid

请求方法：GET

请求参数：

|  字段名   |  说明  |  类型  | 是否必填 |     备注     |
| :-------: | :----: | :----: | :------: | :----------: |
| pbl_token |   -    | String |    是    | 用于验证身份 |
|   p_id    | 项目id | String |    是    |      -       |

返回参数：

|  字段名  | 说明                                                 |  类型  | 备注 |
| :------: | :--------------------------------------------------- | :----: | :--: |
|   code   | 200：获取成功<br>208：登录超时                       |  int   |  -   |
| message  | 200：获取成功<br>208：权限不够<br>其它：返回错误信息 | String |  -   |
| allItems | 200：项目所有评分item<br>其它：空字符串              | String |  -   |



接口URL：/api/setTeacherGrade

请求方法：POST

请求参数：

|    字段名     |       说明       |  类型  | 是否必填 |     备注     |
| :-----------: | :--------------: | :----: | :------: | :----------: |
|   pbl_token   |        -         | String |    是    | 用于验证身份 |
| student_grade | 学生单项评分成绩 | String |    是    |      -       |

返回参数：

| 字段名  | 说明                                                 |  类型  | 备注 |
| :-----: | :--------------------------------------------------- | :----: | :--: |
|  code   | 200：更新成功<br>208：登录超时                       |  int   |  -   |
| message | 200：更新成功<br>208：权限不够<br>其它：返回错误信息 | String |  -   |

